<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Property Listings testing - Find Your Dream Home</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --warning-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            --dark-gradient: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.18);
            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
            --shadow-soft: 0 8px 32px rgba(31, 38, 135, 0.37);
            --shadow-hover: 0 15px 35px rgba(31, 38, 135, 0.5);
            --border-radius: 16px;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        .header {
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-soft);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            transform: translateX(-100%);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .header h1 {
            color: white;
            margin-bottom: 15px;
            font-size: 3em;
            font-weight: 700;
            text-shadow: 0 4px 8px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }

        .header p {
            color: rgba(255,255,255,0.9);
            font-size: 1.3em;
            font-weight: 300;
            position: relative;
            z-index: 1;
        }

        /* Controls Section */
        .controls {
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            padding: 35px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-soft);
        }

        .search-section {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            align-items: flex-end;
            flex-wrap: wrap;
        }

        .search-group {
            flex: 1;
            min-width: 300px;
        }

        .search-input {
            width: 100%;
            padding: 18px 25px 18px 55px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50px;
            font-size: 16px;
            background: rgba(255,255,255,0.9);
            transition: all 0.3s ease;
            position: relative;
        }

        .search-group {
            position: relative;
        }

        .search-group::before {
            content: '\f002';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            z-index: 10;
        }

        .search-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filter-group label {
            font-weight: 600;
            color: white;
            font-size: 0.95em;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .filter-select, .filter-input {
            padding: 12px 18px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 12px;
            font-size: 15px;
            background: rgba(255,255,255,0.9);
            transition: all 0.3s ease;
        }

        .filter-select:focus, .filter-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--success-gradient);
            color: white;
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(79, 172, 254, 0.6);
        }

        .btn-clear {
            background: var(--warning-gradient);
            color: white;
            box-shadow: 0 8px 25px rgba(250, 112, 154, 0.4);
        }

        .btn-clear:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(250, 112, 154, 0.6);
        }

        .btn-add {
            background: var(--secondary-gradient);
            color: white;
            box-shadow: 0 8px 25px rgba(240, 147, 251, 0.4);
        }

        .btn-add:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(240, 147, 251, 0.6);
        }

        /* Property Grid */
        .properties-section {
            position: relative;
        }

        .properties-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            color: white;
        }

        .properties-count {
            font-size: 1.2em;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .properties-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(420px, 1fr));
            gap: 30px;
        }

        .property-card {
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow-soft);
            transition: all 0.4s ease;
            position: relative;
            animation: slideInUp 0.6s ease-out;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .property-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-hover);
        }

        .property-header {
            padding: 25px;
            background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.1) 100%);
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .property-title {
            font-size: 1.4em;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
            line-height: 1.3;
        }

        .property-badges {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .property-type {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 0.85em;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .type-sale {
            background: var(--secondary-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.4);
        }

        .type-rent {
            background: var(--success-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.4);
        }

        .property-details {
            padding: 25px;
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: rgba(255,255,255,0.7);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .detail-item:hover {
            background: rgba(255,255,255,0.9);
            transform: translateX(5px);
        }

        .detail-icon {
            width: 24px;
            height: 24px;
            color: #667eea;
            font-size: 1.1em;
        }

        .detail-content {
            flex: 1;
        }

        .detail-label {
            font-size: 0.8em;
            color: var(--text-secondary);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detail-value {
            font-size: 1em;
            color: var(--text-primary);
            font-weight: 700;
        }

        .price-section {
            background: var(--dark-gradient);
            margin: 0 25px 25px 25px;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .price-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(255,255,255,0.1) 2px,
                rgba(255,255,255,0.1) 4px
            );
            animation: moveLines 20s linear infinite;
        }

        @keyframes moveLines {
            0% { transform: translateY(0); }
            100% { transform: translateY(20px); }
        }

        .price {
            font-size: 2em;
            font-weight: 800;
            color: white;
            margin-bottom: 5px;
            position: relative;
            z-index: 1;
        }

        .price-type {
            color: rgba(255,255,255,0.8);
            font-weight: 500;
            position: relative;
            z-index: 1;
        }

        .description {
            padding: 0 25px 20px;
            font-size: 0.95em;
            line-height: 1.6;
            color: var(--text-secondary);
            background: rgba(255,255,255,0.5);
            margin: 0 25px;
            border-radius: 10px;
            padding: 15px;
        }

        .property-actions {
            padding: 25px;
            display: flex;
            gap: 12px;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .btn-small {
            padding: 10px 20px;
            font-size: 14px;
            border-radius: 25px;
            flex: 1;
            min-width: 100px;
        }

        .btn-share {
            background: var(--success-gradient);
            color: white;
        }

        .btn-view {
            background: var(--primary-gradient);
            color: white;
        }

        .btn-delete {
            background: var(--warning-gradient);
            color: white;
        }

        .btn-contact {
            background: linear-gradient(135deg, #25d366 0%, #128c7e 100%);
            color: white;
        }

        /* Media Gallery */
        .media-gallery {
            margin: 20px 25px;
        }

        .media-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }

        .media-item {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .media-item:hover {
            transform: scale(1.05);
            border-color: #667eea;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            margin: 3% auto;
            padding: 40px;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: slideInDown 0.4s ease;
        }

        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(90deg);
        }

        .modal h2 {
            color: white;
            margin-bottom: 30px;
            font-size: 2em;
            text-align: center;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: white;
            font-size: 1em;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 12px;
            font-size: 16px;
            background: rgba(255,255,255,0.9);
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .file-upload {
            border: 3px dashed rgba(255,255,255,0.5);
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.1);
        }

        .file-upload:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .file-upload i {
            font-size: 2.5em;
            color: white;
            margin-bottom: 15px;
            display: block;
        }

        .file-upload p {
            color: white;
            font-size: 1.1em;
            font-weight: 500;
        }

        /* Loading and Error States */
        .loading, .no-results, .error {
            text-align: center;
            padding: 80px 20px;
            color: white;
            font-size: 1.3em;
        }

        .loading i, .no-results i, .error i {
            font-size: 3em;
            margin-bottom: 20px;
            display: block;
            opacity: 0.8;
        }

        .loading i {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
            
            .header p {
                font-size: 1.1em;
            }
            
            .properties-grid {
                grid-template-columns: 1fr;
            }
            
            .search-section {
                flex-direction: column;
            }
            
            .search-group {
                min-width: auto;
            }
            
            .filters-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .details-grid {
                grid-template-columns: 1fr;
            }
            
            .property-actions {
                flex-direction: column;
            }
            
            .btn-small {
                flex: none;
            }
        }

        @media (max-width: 480px) {
            .filters-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                padding: 25px;
            }
            
            .controls {
                padding: 20px;
            }
            
            .modal-content {
                margin: 5% auto;
                padding: 25px;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255,255,255,0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-building"></i> Premium Property Listings</h1>
            <p>Discover Your Perfect Home with Professional Real Estate Solutions</p>
        </div>

        <div class="controls">
            <div class="search-section">
                <div class="search-group">
                    <input type="text" id="searchInput" class="search-input" placeholder="Search by location, property name, BHK, or any keyword...">
                </div>
            </div>
            
            <div class="filters-grid">
                <div class="filter-group">
                    <label><i class="fas fa-tag"></i> Property Type</label>
                    <select id="typeFilter" class="filter-select">
                        <option value="all">All Types</option>
                        <option value="sale">For Sale</option>
                        <option value="rent">For Rent</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label><i class="fas fa-home"></i> BHK</label>
                    <select id="bhkFilter" class="filter-select">
                        <option value="all">All BHK</option>
                        <option value="1">1 BHK</option>
                        <option value="2">2 BHK</option>
                        <option value="3">3 BHK</option>
                        <option value="4">4 BHK</option>
                        <option value="5">5+ BHK</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label><i class="fas fa-rupee-sign"></i> Min Price (Cr)</label>
                    <input type="number" id="minPrice" class="filter-input" placeholder="0" step="0.1" min="0">
                </div>
                
                <div class="filter-group">
                    <label><i class="fas fa-rupee-sign"></i> Max Price (Cr)</label>
                    <input type="number" id="maxPrice" class="filter-input" placeholder="10" step="0.1" min="0">
                </div>
                
                <div class="filter-group">
                    <label><i class="fas fa-map-marker-alt"></i> Location</label>
                    <input type="text" id="locationFilter" class="filter-input" placeholder="Enter area or location">
                </div>
                
                <div class="filter-group">
                    <label><i class="fas fa-compass"></i> Facing</label>
                    <select id="facingFilter" class="filter-select">
                        <option value="all">All Directions</option>
                        <option value="north">North</option>
                        <option value="south">South</option>
                        <option value="east">East</option>
                        <option value="west">West</option>
                        <option value="north-east">North-East</option>
                        <option value="south-east">South-East</option>
                        <option value="north-west">North-West</option>
                        <option value="south-west">South-West</option>
                    </select>
                </div>
            </div>
            
            <div class="action-buttons">
                <button id="clearFilters" class="btn btn-clear">
                    <i class="fas fa-eraser"></i> Clear Filters
                </button>
                <button id="addPropertyBtn" class="btn btn-add">
                    <i class="fas fa-plus-circle"></i> Add New Property
                </button>
            </div>
        </div>

        <div class="properties-section">
            <div class="properties-header">
                <div class="properties-count" id="propertiesCount">
                    <i class="fas fa-list"></i> Loading properties...
                </div>
            </div>
            
            <div id="propertiesContainer">
                <div class="loading">
                    <i class="fas fa-spinner"></i>
                    <p>Loading premium properties...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Property Modal -->
    <div id="addPropertyModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2><i class="fas fa-plus-circle"></i> Add New Property</h2>
            <form id="addPropertyForm">
                <div class="form-group">
                    <label for="title"><i class="fas fa-tag"></i> Property Title</label>
                    <input type="text" id="title" name="title" required placeholder="Enter property title">
                </div>
                
                <div class="form-group">
                    <label for="type"><i class="fas fa-handshake"></i> Transaction Type</label>
                    <select id="type" name="type" required>
                        <option value="sale">For Sale</option>
                        <option value="rent">For Rent</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="bhk"><i class="fas fa-bed"></i> BHK Configuration</label>
                    <input type="text" id="bhk" name="bhk" placeholder="e.g., 3BHK, 2.5BHK" required>
                </div>
                
                <div class="form-group">
                    <label for="area"><i class="fas fa-ruler-combined"></i> Area (Square Feet)</label>
                    <input type="number" id="area" name="area" required placeholder="Enter area in sq ft">
                </div>
                
                <div class="form-group">
                    <label for="price"><i class="fas fa-rupee-sign"></i> Price</label>
                    <input type="number" id="price" name="price" step="0.01" required placeholder="For Sale: Crores | For Rent: Lakhs per month">
                </div>
                
                <div class="form-group">
                    <label for="location"><i class="fas fa-map-marker-alt"></i> Location</label>
                    <input type="text" id="location" name="location" required placeholder="Enter location/area">
                </div>
                
                <div class="form-group">
                    <label for="facing"><i class="fas fa-compass"></i> Facing Direction</label>
                    <select id="facing" name="facing">
                        <option value="North">North</option>
                        <option value="South">South</option>
                        <option value="East">East</option>
                        <option value="West">West</option>
                        <option value="North-East">North-East</option>
                        <option value="North-West">North-West</option>
                        <option value="South-East">South-East</option>
                        <option value="South-West">South-West</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="furnished"><i class="fas fa-couch"></i> Furnished Status</label>
                    <select id="furnished" name="furnished">
                        <option value="Unfurnished">Unfurnished</option>
                        <option value="Semi Furnished">Semi Furnished</option>
                        <option value="Fully Furnished">Fully Furnished</option>
                        <option value="Ready to move-in">Ready to move-in</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="parking"><i class="fas fa-car"></i> Parking Details</label>
                    <input type="text" id="parking" name="parking" placeholder="e.g., 2 Covered, 1 Open">
                </div>
                
                <div class="form-group">
                    <label for="contact"><i class="fas fa-phone"></i> Contact Number</label>
                    <input type="tel" id="contact" name="contact" required placeholder="Enter contact number">
                </div>
                
                <div class="form-group">
                    <label for="description"><i class="fas fa-align-left"></i> Property Description</label>
                    <textarea id="description" name="description" rows="4" required placeholder="Describe the property features, amenities, and other details"></textarea>
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-images"></i> Property Images</label>
                    <div class="file-upload" onclick="document.getElementById('images').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Click to upload property images</p>
                        <input type="file" id="images" name="images" multiple accept="image/*" style="display: none;">
                    </div>
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-video"></i> Property Videos</label>
                    <div class="file-upload" onclick="document.getElementById('videos').click()">
                        <i class="fas fa-video"></i>
                        <p>Click to upload property videos</p>
                        <input type="file" id="videos" name="videos" multiple accept="video/*" style="display: none;">
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px;">
                    <i class="fas fa-save"></i> Add Property to Listings
                </button>
            </form>
        </div>
    </div>

    <script>
        let properties = [];
        let filteredProperties = [];
        let currentFilters = {};

        // DOM Elements
        const searchInput = document.getElementById('searchInput');
        const typeFilter = document.getElementById('typeFilter');
        const bhkFilter = document.getElementById('bhkFilter');
        const minPriceFilter = document.getElementById('minPrice');
        const maxPriceFilter = document.getElementById('maxPrice');
        const locationFilter = document.getElementById('locationFilter');
        const facingFilter = document.getElementById('facingFilter');
        const clearFiltersBtn = document.getElementById('clearFilters');
        const propertiesContainer = document.getElementById('propertiesContainer');
        const propertiesCount = document.getElementById('propertiesCount');
        const addPropertyBtn = document.getElementById('addPropertyBtn');
        const addPropertyModal = document.getElementById('addPropertyModal');
        const addPropertyForm = document.getElementById('addPropertyForm');

        // Event Listeners
        searchInput.addEventListener('input', debounce(filterProperties, 300));
        typeFilter.addEventListener('change', filterProperties);
        bhkFilter.addEventListener('change', filterProperties);
        minPriceFilter.addEventListener('input', debounce(filterProperties, 300));
        maxPriceFilter.addEventListener('input', debounce(filterProperties, 300));
        locationFilter.addEventListener('input', debounce(filterProperties, 300));
        facingFilter.addEventListener('change', filterProperties);
        clearFiltersBtn.addEventListener('click', clearAllFilters);

        addPropertyBtn.addEventListener('click', () => {
            addPropertyModal.style.display = 'block';
        });

        document.querySelector('.close').addEventListener('click', () => {
            addPropertyModal.style.display = 'none';
        });

        window.addEventListener('click', (e) => {
            if (e.target === addPropertyModal) {
                addPropertyModal.style.display = 'none';
            }
        });

        addPropertyForm.addEventListener('submit', addProperty);

        // Utility Functions
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        function clearAllFilters() {
            searchInput.value = '';
            typeFilter.value = 'all';
            bhkFilter.value = 'all';
            minPriceFilter.value = '';
            maxPriceFilter.value = '';
            locationFilter.value = '';
            facingFilter.value = 'all';
            filterProperties();
        }

        // API Functions
        async function loadProperties() {
            try {
                const params = new URLSearchParams({
                    search: searchInput.value,
                    type: typeFilter.value,
                    minPrice: minPriceFilter.value,
                    maxPrice: maxPriceFilter.value,
                    bhk: bhkFilter.value,
                    location: locationFilter.value,
                    facing: facingFilter.value
                });

                const response = await fetch(`/api/properties?${params}`);
                properties = await response.json();
                displayProperties(properties);
                updatePropertiesCount(properties.length);
            } catch (error) {
                console.error('Error loading properties:', error);
                propertiesContainer.innerHTML = `
                    <div class="error">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p>Error loading properties. Please try again.</p>
                    </div>
                `;
            }
        }

        function filterProperties() {
            loadProperties();
        }

        function updatePropertiesCount(count) {
            propertiesCount.innerHTML = `<i class="fas fa-building"></i> ${count} Properties Found`;
        }

        function displayProperties(props) {
            if (props.length === 0) {
                propertiesContainer.innerHTML = `
                    <div class="no-results">
                        <i class="fas fa-search"></i>
                        <p>No properties match your search criteria</p>
                        <p style="font-size: 0.9em; margin-top: 10px; opacity: 0.8;">Try adjusting your filters or search terms</p>
                    </div>
                `;
                return;
            }

            const html = props.map((property, index) => `
                <div class="property-card" style="animation-delay: ${index * 0.1}s">
                    <div class="property-header">
                        <div class="property-title">${property.title}</div>
                        <div class="property-badges">
                            <span class="property-type type-${property.type}">
                                <i class="fas fa-${property.type === 'sale' ? 'tag' : 'calendar-alt'}"></i>
                                ${property.type === 'sale' ? 'For Sale' : 'For Rent'}
                            </span>
                        </div>
                    </div>
                    
                    <div class="property-details">
                        <div class="details-grid">
                            <div class="detail-item">
                                <i class="fas fa-bed detail-icon"></i>
                                <div class="detail-content">
                                    <div class="detail-label">Configuration</div>
                                    <div class="detail-value">${property.bhk}</div>
                                </div>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-ruler-combined detail-icon"></i>
                                <div class="detail-content">
                                    <div class="detail-label">Area</div>
                                    <div class="detail-value">${property.area} Sq Ft</div>
                                </div>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-map-marker-alt detail-icon"></i>
                                <div class="detail-content">
                                    <div class="detail-label">Location</div>
                                    <div class="detail-value">${property.location}</div>
                                </div>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-compass detail-icon"></i>
                                <div class="detail-content">
                                    <div class="detail-label">Facing</div>
                                    <div class="detail-value">${property.facing}</div>
                                </div>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-couch detail-icon"></i>
                                <div class="detail-content">
                                    <div class="detail-label">Furnished</div>
                                    <div class="detail-value">${property.furnished}</div>
                                </div>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-car detail-icon"></i>
                                <div class="detail-content">
                                    <div class="detail-label">Parking</div>
                                    <div class="detail-value">${property.parking}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="price-section">
                        <div class="price">‚Çπ${property.price}</div>
                        <div class="price-type">
                            ${property.type === 'sale' ? 'Crores' : 'Lakhs/month'}
                        </div>
                    </div>
                    
                    ${property.images && property.images.length > 0 ? `
                        <div class="media-gallery">
                            <div class="media-grid">
                                ${property.images.slice(0, 4).map(img => `
                                    <img src="${img}" alt="Property Image" class="media-item" onclick="openImage('${img}')">
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                    
                    ${property.videos && property.videos.length > 0 ? `
                        <div class="media-gallery">
                            <div class="media-grid">
                                ${property.videos.slice(0, 2).map(video => `
                                    <video src="${video}" class="media-item" controls muted></video>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                    
                    <div class="description">
                        ${property.description}
                    </div>
                    
                    <div class="property-actions">
                        <button class="btn btn-share btn-small" onclick="shareProperty(${property.id})">
                            <i class="fas fa-share-alt"></i> Share
                        </button>
                        <button class="btn btn-contact btn-small" onclick="contactAgent('${property.contact}', '${property.title}')">
                            <i class="fab fa-whatsapp"></i> Contact
                        </button>
                        <button class="btn btn-view btn-small" onclick="viewProperty(${property.id})">
                            <i class="fas fa-eye"></i> Details
                        </button>
                        <button class="btn btn-delete btn-small" onclick="deleteProperty(${property.id})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                    
                    <div style="padding: 0 25px 25px; text-align: center;">
                        <div style="background: rgba(255,255,255,0.7); padding: 12px; border-radius: 10px; display: inline-flex; align-items: center; gap: 8px;">
                            <i class="fas fa-phone" style="color: #25d366;"></i>
                            <span style="font-weight: 600; color: var(--text-primary);">${property.contact}</span>
                        </div>
                    </div>
                </div>
            `).join('');
            
            propertiesContainer.innerHTML = `<div class="properties-grid">${html}</div>`;
        }

        async function addProperty(e) {
            e.preventDefault();
            
            const formData = new FormData(addPropertyForm);
            const submitBtn = e.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Adding Property...';
            submitBtn.disabled = true;
            
            try {
                const response = await fetch('/api/properties', {
                    method: 'POST',
                    body: formData
                });
                
                if (response.ok) {
                    addPropertyModal.style.display = 'none';
                    addPropertyForm.reset();
                    resetFileUploadTexts();
                    loadProperties();
                    showNotification('Property added successfully!', 'success');
                } else {
                    showNotification('Error adding property. Please try again.', 'error');
                }
            } catch (error) {
                console.error('Error adding property:', error);
                showNotification('Error adding property. Please check your connection.', 'error');
            } finally {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        }

        async function deleteProperty(id) {
            if (!confirm('Are you sure you want to delete this property? This action cannot be undone.')) {
                return;
            }
            
            try {
                const response = await fetch(`/api/properties/${id}`, {
                    method: 'DELETE'
                });
                
                if (response.ok) {
                    loadProperties();
                    showNotification('Property deleted successfully!', 'success');
                } else {
                    showNotification('Error deleting property. Please try again.', 'error');
                }
            } catch (error) {
                console.error('Error deleting property:', error);
                showNotification('Error deleting property. Please check your connection.', 'error');
            }
        }

        async function shareProperty(id) {
            try {
                const response = await fetch(`/api/share/${id}`);
                const data = await response.json();
                
                if (response.ok) {
                    const shareText = `üè† Premium Property Alert! üè†

${data.property.title}
üìç Location: ${data.property.location}
üè† Configuration: ${data.property.bhk}
üìê Area: ${data.property.area} Sq Ft
üí∞ Price: ‚Çπ${data.property.price} ${data.property.type === 'sale' ? 'Crores' : 'Lakhs/month'}
üß≠ Facing: ${data.property.facing}
ü™ë Furnished: ${data.property.furnished}
üöó Parking: ${data.property.parking}

üìû Contact: ${data.property.contact}

View full details: ${data.shareUrl}

#RealEstate #Property${data.property.type === 'sale' ? 'ForSale' : 'ForRent'} #${data.property.location.replace(/\s+/g, '')}`;
                    
                    if (navigator.share) {
                        await navigator.share({
                            title: data.property.title,
                            text: shareText,
                            url: data.shareUrl
                        });
                    } else {
                        await navigator.clipboard.writeText(shareText);
                        showNotification('Property details copied to clipboard!', 'success');
                    }
                } else {
                    showNotification('Error sharing property. Please try again.', 'error');
                }
            } catch (error) {
                console.error('Error sharing property:', error);
                showNotification('Error sharing property. Please try again.', 'error');
            }
        }

        function contactAgent(phone, propertyTitle) {
            const message = `Hi! I'm interested in the property: ${propertyTitle}. Could you please provide more details?`;
            const whatsappUrl = `https://wa.me/91${phone}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        function viewProperty(id) {
            window.open(`/property/${id}`, '_blank');
        }

        function openImage(src) {
            window.open(src, '_blank');
        }

        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                border-radius: 10px;
                color: white;
                font-weight: 600;
                z-index: 10000;
                animation: slideInRight 0.3s ease;
                max-width: 400px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            `;
            
            if (type === 'success') {
                notification.style.background = 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)';
                notification.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
            } else {
                notification.style.background = 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)';
                notification.innerHTML = `<i class="fas fa-exclamation-triangle"></i> ${message}`;
            }
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 4000);
        }

        function resetFileUploadTexts() {
            document.querySelector('#images').parentElement.querySelector('p').textContent = 'Click to upload property images';
            document.querySelector('#videos').parentElement.querySelector('p').textContent = 'Click to upload property videos';
        }

        // File upload preview
        document.getElementById('images').addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            const preview = files.slice(0, 3).map(file => file.name).join(', ');
            e.target.parentElement.querySelector('p').innerHTML = files.length > 0 ? 
                `<i class="fas fa-check" style="color: #4facfe; margin-right: 8px;"></i>${files.length} image(s) selected: ${preview}${files.length > 3 ? '...' : ''}` : 
                'Click to upload property images';
        });

        document.getElementById('videos').addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            const preview = files.slice(0, 2).map(file => file.name).join(', ');
            e.target.parentElement.querySelector('p').innerHTML = files.length > 0 ? 
                `<i class="fas fa-check" style="color: #4facfe; margin-right: 8px;"></i>${files.length} video(s) selected: ${preview}${files.length > 2 ? '...' : ''}` : 
                'Click to upload property videos';
        });

        // Add CSS animations for notifications
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from {
                    opacity: 0;
                    transform: translateX(100px);
                }
                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }
            
            @keyframes slideOutRight {
                from {
                    opacity: 1;
                    transform: translateX(0);
                }
                to {
                    opacity: 0;
                    transform: translateX(100px);
                }
            }
        `;
        document.head.appendChild(style);

        // Initialize
        loadProperties();
        
        // Add some interactive elements
        document.addEventListener('DOMContentLoaded', function() {
            // Add floating action button effect
            const addBtn = document.getElementById('addPropertyBtn');
            addBtn.addEventListener('mouseover', function() {
                this.style.transform = 'translateY(-3px) scale(1.05)';
            });
            addBtn.addEventListener('mouseout', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });
    </script>
</body>
</html>